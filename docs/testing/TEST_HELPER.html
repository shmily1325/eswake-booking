<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ§ª é ç´„ç³»çµ±æ¸¬è©¦è¼”åŠ©å·¥å…·</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 32px;
    }
    
    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }
    
    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 12px;
      border-left: 4px solid #667eea;
    }
    
    .section h2 {
      color: #667eea;
      margin-bottom: 15px;
      font-size: 20px;
    }
    
    .test-scenario {
      background: white;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .test-scenario h3 {
      color: #333;
      margin-bottom: 10px;
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .test-scenario ul {
      margin-left: 20px;
      color: #666;
      line-height: 1.8;
    }
    
    .test-data {
      background: #f0f0f0;
      padding: 12px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      margin: 10px 0;
      border: 1px solid #ddd;
    }
    
    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: transform 0.2s, box-shadow 0.2s;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button.secondary {
      background: #6c757d;
    }
    
    button.danger {
      background: #dc3545;
    }
    
    button.success {
      background: #28a745;
    }
    
    .status {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }
    
    .status.pass {
      background: #d4edda;
      color: #155724;
    }
    
    .status.fail {
      background: #f8d7da;
      color: #721c24;
    }
    
    .status.pending {
      background: #fff3cd;
      color: #856404;
    }
    
    .checklist {
      list-style: none;
      margin-left: 0;
    }
    
    .checklist li {
      padding: 8px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .checklist input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    
    .timer {
      background: #fff3cd;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      color: #856404;
    }
    
    .notes {
      margin-top: 20px;
      padding: 15px;
      background: #e7f3ff;
      border-radius: 8px;
      border-left: 4px solid #2196F3;
    }
    
    .notes h3 {
      color: #2196F3;
      margin-bottom: 10px;
    }
    
    textarea {
      width: 100%;
      min-height: 100px;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-family: inherit;
      font-size: 14px;
      resize: vertical;
    }
    
    .quick-links {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .quick-link {
      padding: 15px;
      background: white;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      border: 2px solid #e0e0e0;
    }
    
    .quick-link:hover {
      border-color: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    }
    
    .quick-link-icon {
      font-size: 32px;
      margin-bottom: 8px;
    }
    
    .quick-link-title {
      font-weight: 600;
      color: #333;
      margin-bottom: 4px;
    }
    
    .quick-link-desc {
      font-size: 12px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ§ª é ç´„ç³»çµ±æ¸¬è©¦è¼”åŠ©å·¥å…·</h1>
    <p class="subtitle">å¿«é€Ÿæ¸¬è©¦ã€è¿½è¹¤é€²åº¦ã€è¨˜éŒ„å•é¡Œ - è®“æ¸¬è©¦æ›´æœ‰æ•ˆç‡ï¼</p>
    
    <!-- å¿«é€Ÿé€£çµ -->
    <div class="section">
      <h2>ğŸš€ å¿«é€Ÿå‹•ä½œ</h2>
      <div class="quick-links">
        <div class="quick-link" onclick="window.location.href='/'">
          <div class="quick-link-icon">ğŸ </div>
          <div class="quick-link-title">é–‹å•Ÿç³»çµ±</div>
          <div class="quick-link-desc">å‰å¾€ä¸»ç³»çµ±</div>
        </div>
        <div class="quick-link" onclick="generateTestData()">
          <div class="quick-link-icon">ğŸ“Š</div>
          <div class="quick-link-title">ç”Ÿæˆæ¸¬è©¦æ•¸æ“š</div>
          <div class="quick-link-desc">è‡ªå‹•å‰µå»ºæ¸¬è©¦é ç´„</div>
        </div>
        <div class="quick-link" onclick="copyTestData()">
          <div class="quick-link-icon">ğŸ“‹</div>
          <div class="quick-link-title">è¤‡è£½æ¸¬è©¦è³‡æ–™</div>
          <div class="quick-link-desc">è¤‡è£½åˆ°å‰ªè²¼æ¿</div>
        </div>
        <div class="quick-link" onclick="startTimer()">
          <div class="quick-link-icon">â±ï¸</div>
          <div class="quick-link-title">é–‹å§‹è¨ˆæ™‚</div>
          <div class="quick-link-desc">æ¸¬è©¦æ™‚é–“è¿½è¹¤</div>
        </div>
      </div>
    </div>
    
    <!-- æ¸¬è©¦è¨ˆæ™‚å™¨ -->
    <div class="timer" id="timer" style="display: none;">
      æ¸¬è©¦æ™‚é–“: <span id="timerDisplay">00:00:00</span>
    </div>
    
    <!-- æ ¸å¿ƒæ¸¬è©¦å ´æ™¯ -->
    <div class="section">
      <h2>ğŸ¯ æ ¸å¿ƒæ¸¬è©¦å ´æ™¯</h2>
      
      <div class="test-scenario">
        <h3>
          <span>å ´æ™¯1: èˆ¹éš»æ™‚é–“è¡çª</span>
          <span class="status pending">å¾…æ¸¬è©¦</span>
        </h3>
        <ul>
          <li>å‰µå»ºé ç´„ï¼šG23, æ˜å¤© 10:00-11:00, å­¸ç”ŸA</li>
          <li>å˜—è©¦å‰µå»ºï¼šG23, æ˜å¤© 10:30-11:30, å­¸ç”ŸB</li>
          <li>âœ… æ‡‰è©²é¡¯ç¤ºæ™‚é–“é‡ç–ŠéŒ¯èª¤</li>
        </ul>
        <div class="test-data">
          é ç´„1: boat=G23, time=10:00, duration=60min
          é ç´„2: boat=G23, time=10:30, duration=60min
          é æœŸ: âŒ è¡çªéŒ¯èª¤
        </div>
        <button onclick="markTest(this, 'pass')">âœ… é€šé</button>
        <button onclick="markTest(this, 'fail')" class="danger">âŒ å¤±æ•—</button>
      </div>
      
      <div class="test-scenario">
        <h3>
          <span>å ´æ™¯2: æ¥èˆ¹æ™‚é–“è¡çªï¼ˆ15åˆ†é˜è¦å‰‡ï¼‰</span>
          <span class="status pending">å¾…æ¸¬è©¦</span>
        </h3>
        <ul>
          <li>å‰µå»ºé ç´„ï¼šG23, æ˜å¤© 10:00-11:00, å­¸ç”ŸA</li>
          <li>å˜—è©¦å‰µå»ºï¼šG23, æ˜å¤© 11:10-12:00, å­¸ç”ŸB</li>
          <li>âœ… æ‡‰è©²é¡¯ç¤ºéœ€è¦15åˆ†é˜æ¥èˆ¹æ™‚é–“éŒ¯èª¤</li>
          <li>å˜—è©¦å‰µå»ºï¼šG23, æ˜å¤© 11:15-12:00, å­¸ç”ŸC</li>
          <li>âœ… æ‡‰è©²æˆåŠŸï¼ˆå‰›å¥½15åˆ†é˜å¾Œï¼‰</li>
        </ul>
        <div class="test-data">
          é ç´„1çµæŸ: 11:00
          é ç´„2é–‹å§‹: 11:10 â†’ âŒ éŒ¯èª¤ï¼ˆéœ€11:15ï¼‰
          é ç´„3é–‹å§‹: 11:15 â†’ âœ… æˆåŠŸ
        </div>
        <button onclick="markTest(this, 'pass')">âœ… é€šé</button>
        <button onclick="markTest(this, 'fail')" class="danger">âŒ å¤±æ•—</button>
      </div>
      
      <div class="test-scenario">
        <h3>
          <span>å ´æ™¯3: æ•™ç·´æ™‚é–“è¡çª</span>
          <span class="status pending">å¾…æ¸¬è©¦</span>
        </h3>
        <ul>
          <li>å‰µå»ºé ç´„ï¼šG23, æ˜å¤© 10:00-11:00, å­¸ç”ŸA, æ•™ç·´ç‹</li>
          <li>å˜—è©¦å‰µå»ºï¼šG21, æ˜å¤© 10:30-11:30, å­¸ç”ŸB, æ•™ç·´ç‹</li>
          <li>âœ… æ‡‰è©²é¡¯ç¤ºæ•™ç·´ç‹æ™‚é–“è¡çªéŒ¯èª¤</li>
          <li>æ”¹é¸æ•™ç·´æï¼Œæ‡‰è©²æˆåŠŸ</li>
        </ul>
        <div class="test-data">
          æ•™ç·´ç‹: 10:00-11:00 å·²è¢«æŒ‡æ´¾ (G23)
          å˜—è©¦æŒ‡æ´¾: 10:30-11:30 (G21) â†’ âŒ è¡çª
          æ•™ç·´æ: ç„¡é ç´„ â†’ âœ… æˆåŠŸ
        </div>
        <button onclick="markTest(this, 'pass')">âœ… é€šé</button>
        <button onclick="markTest(this, 'fail')" class="danger">âŒ å¤±æ•—</button>
      </div>
      
      <div class="test-scenario">
        <h3>
          <span>å ´æ™¯4: 08:00å‰å¿…é ˆæŒ‡å®šæ•™ç·´</span>
          <span class="status pending">å¾…æ¸¬è©¦</span>
        </h3>
        <ul>
          <li>å˜—è©¦å‰µå»ºï¼šG23, æ˜å¤© 07:30-08:30, å­¸ç”ŸA, ä¸æŒ‡å®šæ•™ç·´</li>
          <li>âŒ æ‡‰è©²é˜»æ­¢ä¸¦é¡¯ç¤º"08:00ä¹‹å‰çš„é ç´„å¿…é ˆæŒ‡å®šæ•™ç·´"</li>
          <li>é¸æ“‡æ•™ç·´ç‹ï¼Œæ‡‰è©²æˆåŠŸ</li>
        </ul>
        <div class="test-data">
          æ™‚é–“: 07:30 (< 08:00)
          æ•™ç·´: æœªæŒ‡å®š â†’ âŒ é˜»æ­¢
          æ•™ç·´: æ•™ç·´ç‹ â†’ âœ… æˆåŠŸ
        </div>
        <button onclick="markTest(this, 'pass')">âœ… é€šé</button>
        <button onclick="markTest(this, 'fail')" class="danger">âŒ å¤±æ•—</button>
      </div>
      
      <div class="test-scenario">
        <h3>
          <span>å ´æ™¯5: é‡è¤‡é ç´„éƒ¨åˆ†è¡çª</span>
          <span class="status pending">å¾…æ¸¬è©¦</span>
        </h3>
        <ul>
          <li>å‰µå»ºé ç´„ï¼šG23, ä¸‹é€±ä¸€ 10:00-11:00, å­¸ç”ŸA</li>
          <li>å‰µå»ºé‡è¤‡é ç´„ï¼šG23, ä¸‹é€±ä¸€ 10:30-11:30, å­¸ç”ŸB, é‡è¤‡4é€±</li>
          <li>âœ… ç¬¬1é€±æ‡‰è©²è¢«è·³éï¼ˆè¡çªï¼‰ï¼Œç¬¬2-4é€±æˆåŠŸ</li>
          <li>æ‡‰è©²é¡¯ç¤ºè©³ç´°å ±å‘Šï¼šæˆåŠŸ3å€‹ï¼Œè·³é1å€‹</li>
        </ul>
        <div class="test-data">
          é€±1: 10:30-11:30 â†’ âŒ èˆ‡å­¸ç”ŸAè¡çªï¼ˆè·³éï¼‰
          é€±2: 10:30-11:30 â†’ âœ… æˆåŠŸ
          é€±3: 10:30-11:30 â†’ âœ… æˆåŠŸ
          é€±4: 10:30-11:30 â†’ âœ… æˆåŠŸ
        </div>
        <button onclick="markTest(this, 'pass')">âœ… é€šé</button>
        <button onclick="markTest(this, 'fail')" class="danger">âŒ å¤±æ•—</button>
      </div>
      
      <div class="test-scenario">
        <h3>
          <span>å ´æ™¯6: å¤šæœƒå“¡é ç´„</span>
          <span class="status pending">å¾…æ¸¬è©¦</span>
        </h3>
        <ul>
          <li>æœå°‹ä¸¦é¸æ“‡æœƒå“¡Aã€æœƒå“¡B</li>
          <li>æ‰‹å‹•è¼¸å…¥"è¨ªå®¢C"</li>
          <li>å‰µå»ºé ç´„</li>
          <li>âœ… contact_name æ‡‰è©²æ˜¯ "æœƒå“¡Aåå­—, æœƒå“¡Båå­—, è¨ªå®¢C"</li>
          <li>âœ… booking_members è¡¨æ‡‰è©²æœ‰2ç­†è¨˜éŒ„</li>
          <li>ç·¨è¼¯è©²é ç´„ï¼Œç¢ºèªæœƒå“¡å’Œè¨ªå®¢éƒ½æ­£ç¢ºé¡¯ç¤º</li>
        </ul>
        <div class="test-data">
          é¸æ“‡: æœƒå“¡A(ID:123), æœƒå“¡B(ID:456)
          æ‰‹å‹•: è¨ªå®¢C
          
          bookings.contact_name = "é™³å¤§æ˜, æå°è¯, è¨ªå®¢C"
          bookings.member_id = "123" (ç¬¬ä¸€ä½)
          
          booking_members:
          - booking_id=999, member_id=123
          - booking_id=999, member_id=456
        </div>
        <button onclick="markTest(this, 'pass')">âœ… é€šé</button>
        <button onclick="markTest(this, 'fail')" class="danger">âŒ å¤±æ•—</button>
      </div>
    </div>
    
    <!-- å¿«é€Ÿæª¢æŸ¥æ¸…å–® -->
    <div class="section">
      <h2>âœ… å¿«é€Ÿæª¢æŸ¥æ¸…å–®</h2>
      <ul class="checklist">
        <li><input type="checkbox" id="check1"> <label for="check1">æ™‚é–“é¡¯ç¤ºæ­£ç¢ºï¼ˆç„¡æ™‚å€å•é¡Œï¼‰</label></li>
        <li><input type="checkbox" id="check2"> <label for="check2">èˆ¹éš»è¡çªæª¢æ¸¬æ­£å¸¸</label></li>
        <li><input type="checkbox" id="check3"> <label for="check3">æ•™ç·´è¡çªæª¢æ¸¬æ­£å¸¸</label></li>
        <li><input type="checkbox" id="check4"> <label for="check4">08:00å‰è¦å‰‡æ­£ç¢ºåŸ·è¡Œ</label></li>
        <li><input type="checkbox" id="check5"> <label for="check5">é‡è¤‡é ç´„åŠŸèƒ½æ­£å¸¸</label></li>
        <li><input type="checkbox" id="check6"> <label for="check6">å¤šæœƒå“¡é¸æ“‡å’Œé¡¯ç¤ºæ­£ç¢º</label></li>
        <li><input type="checkbox" id="check7"> <label for="check7">ç·¨è¼¯é ç´„è¡çªæª¢æŸ¥æ­£ç¢ºï¼ˆæ’é™¤è‡ªå·±ï¼‰</label></li>
        <li><input type="checkbox" id="check8"> <label for="check8">éŒ¯èª¤è¨Šæ¯æ¸…æ™°æ˜“æ‡‚</label></li>
        <li><input type="checkbox" id="check9"> <label for="check9">æ‰‹æ©Ÿç‰ˆUIæ­£å¸¸</label></li>
        <li><input type="checkbox" id="check10"> <label for="check10">åˆ—è¡¨/æ™‚é–“è»¸åˆ‡æ›æ­£å¸¸</label></li>
      </ul>
      <button onclick="calculateProgress()" class="success" style="margin-top: 15px;">ğŸ“Š è¨ˆç®—å®Œæˆåº¦</button>
    </div>
    
    <!-- å•é¡Œè¨˜éŒ„ -->
    <div class="notes">
      <h3>ğŸ“ æ¸¬è©¦è¨˜éŒ„ & å•é¡Œ</h3>
      <textarea id="testNotes" placeholder="åœ¨é€™è£¡è¨˜éŒ„æ¸¬è©¦ä¸­ç™¼ç¾çš„å•é¡Œã€bugã€æ”¹å–„å»ºè­°...&#10;&#10;ä¾‹å¦‚ï¼š&#10;- [BUG] æ•™ç·´è¡çªæª¢æŸ¥å¤±æ•—ï¼Œå¯ä»¥é‡è¤‡æŒ‡æ´¾åŒä¸€æ•™ç·´&#10;- [æ”¹å–„] éŒ¯èª¤è¨Šæ¯å¯ä»¥æ›´æ˜ç¢ºæŒ‡å‡ºå“ªå€‹æ•™ç·´è¡çª&#10;- [å¾…ç¢ºèª] é‡è¤‡é ç´„è¶…é10é€±æ™‚æ˜¯å¦æœƒæœ‰æ€§èƒ½å•é¡Œ"></textarea>
      <button onclick="saveNotes()" style="margin-top: 10px;" class="success">ğŸ’¾ å„²å­˜ç­†è¨˜</button>
      <button onclick="exportReport()" style="margin-top: 10px;">ğŸ“„ åŒ¯å‡ºæ¸¬è©¦å ±å‘Š</button>
    </div>
  </div>
  
  <script>
    let timerInterval = null;
    let startTime = null;
    
    function markTest(button, result) {
      const scenario = button.closest('.test-scenario');
      const statusEl = scenario.querySelector('.status');
      
      if (result === 'pass') {
        statusEl.textContent = 'é€šé';
        statusEl.className = 'status pass';
      } else {
        statusEl.textContent = 'å¤±æ•—';
        statusEl.className = 'status fail';
      }
      
      // ä¿å­˜çµæœåˆ° localStorage
      saveTestResults();
    }
    
    function startTimer() {
      const timerEl = document.getElementById('timer');
      const displayEl = document.getElementById('timerDisplay');
      
      if (timerInterval) {
        // åœæ­¢è¨ˆæ™‚
        clearInterval(timerInterval);
        timerInterval = null;
        timerEl.style.display = 'none';
        alert('æ¸¬è©¦æ™‚é–“: ' + displayEl.textContent);
        return;
      }
      
      // é–‹å§‹è¨ˆæ™‚
      startTime = Date.now();
      timerEl.style.display = 'block';
      
      timerInterval = setInterval(() => {
        const elapsed = Date.now() - startTime;
        const hours = Math.floor(elapsed / 3600000);
        const minutes = Math.floor((elapsed % 3600000) / 60000);
        const seconds = Math.floor((elapsed % 60000) / 1000);
        
        displayEl.textContent = 
          String(hours).padStart(2, '0') + ':' +
          String(minutes).padStart(2, '0') + ':' +
          String(seconds).padStart(2, '0');
      }, 1000);
    }
    
    function calculateProgress() {
      const total = document.querySelectorAll('.checklist input[type="checkbox"]').length;
      const checked = document.querySelectorAll('.checklist input[type="checkbox"]:checked').length;
      const percentage = Math.round((checked / total) * 100);
      
      alert(`æ¸¬è©¦å®Œæˆåº¦: ${checked}/${total} (${percentage}%)\n\n${percentage === 100 ? 'ğŸ‰ æ­å–œï¼æ‰€æœ‰é …ç›®éƒ½å·²å®Œæˆï¼' : 'ç¹¼çºŒåŠ æ²¹ï¼'}`);
    }
    
    function generateTestData() {
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      const dateStr = tomorrow.toISOString().split('T')[0];
      
      const testData = `
æ¸¬è©¦æ•¸æ“šç”Ÿæˆå™¨
============

æ˜å¤©æ—¥æœŸ: ${dateStr}

å ´æ™¯1 - èˆ¹éš»è¡çª:
  é ç´„1: G23, ${dateStr} 10:00, 60åˆ†é˜, å­¸ç”ŸA
  é ç´„2: G23, ${dateStr} 10:30, 60åˆ†é˜, å­¸ç”ŸB (æ‡‰è©²è¡çª)

å ´æ™¯2 - æ¥èˆ¹æ™‚é–“:
  é ç´„1: G23, ${dateStr} 10:00, 60åˆ†é˜, å­¸ç”ŸA
  é ç´„2: G23, ${dateStr} 11:10, 60åˆ†é˜, å­¸ç”ŸB (æ‡‰è©²è¡çª)
  é ç´„3: G23, ${dateStr} 11:15, 60åˆ†é˜, å­¸ç”ŸC (æ‡‰è©²æˆåŠŸ)

å ´æ™¯3 - æ•™ç·´è¡çª:
  é ç´„1: G23, ${dateStr} 10:00, 60åˆ†é˜, å­¸ç”ŸA, æ•™ç·´ç‹
  é ç´„2: G21, ${dateStr} 10:30, 60åˆ†é˜, å­¸ç”ŸB, æ•™ç·´ç‹ (æ‡‰è©²è¡çª)

æ¸¬è©¦æç¤º:
- æŒ‰ç…§é †åºé€ä¸€æ¸¬è©¦
- æ¯å€‹æ¸¬è©¦å¾Œè¨˜éŒ„çµæœ
- ç™¼ç¾å•é¡Œç«‹å³åœ¨ä¸‹æ–¹ç­†è¨˜å€è¨˜éŒ„
      `.trim();
      
      alert('æ¸¬è©¦æ•¸æ“šå·²ç”Ÿæˆï¼\n\né»æ“Š"è¤‡è£½æ¸¬è©¦è³‡æ–™"æŒ‰éˆ•è¤‡è£½åˆ°å‰ªè²¼æ¿ã€‚');
      return testData;
    }
    
    function copyTestData() {
      const data = generateTestData();
      navigator.clipboard.writeText(data).then(() => {
        alert('âœ… æ¸¬è©¦æ•¸æ“šå·²è¤‡è£½åˆ°å‰ªè²¼æ¿ï¼');
      });
    }
    
    function saveNotes() {
      const notes = document.getElementById('testNotes').value;
      localStorage.setItem('testNotes', notes);
      alert('âœ… ç­†è¨˜å·²å„²å­˜ï¼');
    }
    
    function loadNotes() {
      const notes = localStorage.getItem('testNotes');
      if (notes) {
        document.getElementById('testNotes').value = notes;
      }
    }
    
    function exportReport() {
      const notes = document.getElementById('testNotes').value;
      const checkboxes = document.querySelectorAll('.checklist input[type="checkbox"]');
      const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
      const total = checkboxes.length;
      
      const scenarios = document.querySelectorAll('.test-scenario');
      let scenarioResults = '';
      scenarios.forEach((s, i) => {
        const title = s.querySelector('h3 span:first-child').textContent;
        const status = s.querySelector('.status').textContent;
        scenarioResults += `${i + 1}. ${title}: ${status}\n`;
      });
      
      const report = `
é ç´„ç³»çµ±æ¸¬è©¦å ±å‘Š
================
æ¸¬è©¦æ—¥æœŸ: ${new Date().toLocaleString('zh-TW')}
å®Œæˆåº¦: ${checked}/${total} (${Math.round(checked/total*100)}%)

å ´æ™¯æ¸¬è©¦çµæœ:
${scenarioResults}

å•é¡Œè¨˜éŒ„:
${notes || 'ç„¡'}

---
æ¸¬è©¦äººå“¡: ___________
      `.trim();
      
      const blob = new Blob([report], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `æ¸¬è©¦å ±å‘Š_${new Date().toISOString().split('T')[0]}.txt`;
      a.click();
    }
    
    function saveTestResults() {
      const scenarios = document.querySelectorAll('.test-scenario');
      const results = {};
      scenarios.forEach((s, i) => {
        const status = s.querySelector('.status').className;
        results[i] = status;
      });
      localStorage.setItem('testResults', JSON.stringify(results));
    }
    
    function loadTestResults() {
      const results = localStorage.getItem('testResults');
      if (results) {
        const parsed = JSON.parse(results);
        const scenarios = document.querySelectorAll('.test-scenario');
        scenarios.forEach((s, i) => {
          if (parsed[i]) {
            s.querySelector('.status').className = parsed[i];
          }
        });
      }
    }
    
    // é é¢è¼‰å…¥æ™‚æ¢å¾©ç‹€æ…‹
    window.onload = () => {
      loadNotes();
      loadTestResults();
    };
    
    // è‡ªå‹•å„²å­˜
    setInterval(() => {
      const notes = document.getElementById('testNotes').value;
      if (notes) {
        localStorage.setItem('testNotes', notes);
      }
    }, 30000); // æ¯30ç§’è‡ªå‹•å„²å­˜
  </script>
</body>
</html>

